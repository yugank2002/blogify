<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head.ejs') %>
    <title>BlogiFY - Add Blog</title>
    <style>
        /* Styles specific to the Add Blog form */

        /* Main container for the form to center it and manage spacing */
        .add-blog-container {
            flex-grow: 1; /* Allows it to take up remaining vertical space within main-content-wrapper */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to the start to prevent form from stretching full height */
            padding: 40px 20px; /* Generous padding around the form */
            box-sizing: border-box;
            min-height: calc(100vh - 80px); /* Ensure it takes up enough space below fixed nav */
        }

        /* Card-like styling for the form itself */
        .add-blog-card {
            background-color: var(--card-background); /* White or off-white from your theme */
            border-radius: 15px; /* More rounded corners for a modern feel */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); /* Stronger, softer shadow for depth */
            padding: 40px 50px; /* Ample internal padding */
            width: 100%;
            max-width: 700px; /* Max width for readability */
            box-sizing: border-box;
            text-align: left;
            animation: fadeIn 0.8s ease-out; /* Simple fade-in animation */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .add-blog-card h2 {
            color: var(--primary-color); /* Deep purple from your theme */
            margin-bottom: 30px;
            font-size: 2.2em; /* Slightly larger heading */
            font-weight: 700;
            text-align: center;
        }

        /* Form group for labels and inputs */
        .form-group {
            margin-bottom: 25px; /* Spacing between form fields */
        }

        .form-label {
            display: block;
            margin-bottom: 10px; /* Space between label and input */
            color: var(--text-dark);
            font-weight: 600;
            font-size: 1.05rem; /* Slightly larger and bolder labels */
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 14px 18px; /* More generous padding inside inputs */
            border: 1px solid var(--border-color); /* Light grey border */
            border-radius: 10px; /* Rounded input fields */
            font-size: 1rem;
            color: var(--text-dark);
            background-color: var(--background-light); /* Light background for inputs */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box; /* Include padding in width */
            font-family: 'Poppins', sans-serif; /* Consistent font */
        }

        .form-input:focus,
        .form-textarea:focus {
            border-color: var(--accent-color); /* Cyan focus color */
            box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.25); /* More prominent focus shadow */
            outline: none; /* Remove default outline */
        }

        .form-textarea {
            resize: vertical; /* Allow vertical resizing only */
            min-height: 150px; /* Good default height for content */
        }

        /* Custom file input styling */
        .file-input-wrapper {
            position: relative;
            display: flex; /* Use flexbox for alignment */
            align-items: center; /* Vertically align items */
            width: 100%;
            border: 1px solid var(--border-color); /* Add border to mimic input field */
            border-radius: 10px; /* Rounded corners */
            padding: 10px; /* Padding around the content */
            box-sizing: border-box;
            background-color: var(--background-light);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .file-input-wrapper:has(.file-input-hidden:focus) { /* Style wrapper when hidden input is focused */
            border-color: var(--accent-color);
            box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.25);
        }

        .file-input-button {
            background-color: var(--secondary-color); /* Amber button */
            color: var(--primary-color); /* Deep purple text */
            padding: 10px 18px; /* Adjusted padding */
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem; /* Slightly smaller font for button */
            transition: background-color 0.3s ease, transform 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap; /* Prevent text wrapping */
        }

        .file-input-button:hover {
            background-color: var(--accent-color); /* Cyan hover */
            color: var(--text-light); /* White text on hover */
            transform: translateY(-2px);
        }

        .file-input-button svg {
            width: 20px;
            height: 20px;
            fill: currentColor; /* Inherits color from parent */
        }

        .file-input-text {
            margin-left: 15px;
            color: #555; /* Slightly darker text for filename */
            font-size: 0.9rem; /* Smaller font for filename */
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1; /* Allows text to take available space */
            min-width: 0; /* Allows text to shrink */
        }

        .file-input-hidden {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            z-index: 10; /* Ensure it's clickable */
        }
        
        /* Submit button styling */
        .submit-button {
            background-color: var(--primary-color); /* Deep purple button */
            color: var(--text-light); /* White text */
            border: none;
            padding: 16px 30px; /* Larger, more prominent button */
            border-radius: 10px; /* Rounded corners */
            cursor: pointer;
            font-weight: 700;
            font-size: 1.15rem; /* Larger font size */
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            width: 100%; /* Full width */
            margin-top: 30px; /* Space above button */
            letter-spacing: 0.5px;
        }

        .submit-button:hover {
            background-color: var(--secondary-color); /* Amber hover */
            color: var(--primary-color); /* Deep purple text on hover */
            transform: translateY(-3px); /* More pronounced lift */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
        }

        /* Error message styling */
        .error-message {
            background-color: #ffe0e6;
            color: #d8000c;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #ffb3c1;
            font-size: 0.9rem;
            text-align: left;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .add-blog-card {
                padding: 30px; /* Reduce padding on smaller screens */
                border-radius: 10px; /* Slightly less rounded */
            }

            .add-blog-card h2 {
                font-size: 1.8em;
                margin-bottom: 25px;
            }

            .form-group {
                margin-bottom: 20px;
            }

            .form-input,
            .form-textarea {
                font-size: 0.95rem; /* Slightly smaller text */
                padding: 12px 15px; /* Adjust padding */
            }
            
            .file-input-button {
                font-size: 0.85rem;
                padding: 8px 15px;
            }

            .file-input-text {
                margin-left: 10px;
                font-size: 0.85rem;
            }

            .submit-button {
                padding: 14px 20px;
            }
            .add-blog-container {
                padding: 30px 15px;
            }
        }
    </style>
</head>
<body>
    <%- include('./partials/nav.ejs') %>

    <div class="main-content-wrapper">
        <div class="add-blog-container">
            <div class="add-blog-card">
                <h2>Create a New Blog Post</h2>

                <% if (typeof error !== 'undefined' && error) { %>
                    <div class="error-message">
                        <%= error %>
                    </div>
                <% } %>

                <form action="/blog" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="title" class="form-label">Blog Title</label>
                        <input type="text" name="title" class="form-input" id="title" placeholder="Enter title for your blog" required>
                    </div>

                    <div class="form-group">
                        <label for="description" class="form-label">Description</label>
                        <textarea name="description" class="form-textarea" id="description" rows="6" placeholder="Write your blog content here..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="coverImage" class="form-label">Cover Image</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="coverImage" name="coverImage" accept="image/*" class="file-input-hidden" required onchange="updateFileName(this)">
                            <label for="coverImage" class="file-input-button">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 7h-4V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 10H9v-6h6v6z"/></svg>
                                Choose File
                            </label>
                            <span id="file-name" class="file-input-text">No file chosen</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="video" class="form-label">Optional Video</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="video" name="video" accept="video/*" class="file-input-hidden" onchange="updateVideoFileName(this)">
                            <label for="video" class="file-input-button">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 16.5l6-4.5-6-4.5v9z"/></svg>
                                Choose Video
                            </label>
                            <span id="video-file-name" class="file-input-text">No video chosen</span>
                        </div>
                    </div>

                    <button type="submit" class="submit-button">Add Blog</button>
                </form>
            </div>
        </div>
    </div>
    <script>
        // JavaScript to update the file name display
        function updateFileName(input) {
            const fileNameSpan = document.getElementById('file-name');
            if (input.files && input.files.length > 0) {
                fileNameSpan.textContent = input.files[0].name;
            } else {
                fileNameSpan.textContent = 'No file chosen';
            }
        }

        function updateVideoFileName(input) {
            const fileNameSpan = document.getElementById('video-file-name');
            if (input.files && input.files.length > 0) {
                fileNameSpan.textContent = input.files[0].name;
            } else {
                fileNameSpan.textContent = 'No video chosen';
            }
        }
    </script>
</body>
</html>